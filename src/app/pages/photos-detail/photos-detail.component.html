<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="m-0">@if (data()) { {{ titleText() }} }</h3>
  <div class="d-flex align-items-center gap-2">
    <button mat-stroked-button (click)="togglePanel()">Show all details</button>
    <button mat-stroked-button color="warn" (click)="back()">Back</button>
  </div>
</div>

@if (data()) {
<div class="row g-3">
  <div class="col-12 col-md-5">
    @if (data()!.images?.length) {
    <img
      [src]="data()!.images![0].uri"
      alt="cover"
      class="img-fluid rounded shadow-sm"
      style="object-fit: cover; max-height: 360px"
    />
    }
  </div>
</div>

<mat-expansion-panel
  class="mt-3"
  [expanded]="expanded()"
  (opened)="expanded.set(true)"
  (closed)="expanded.set(false)"
>
  <mat-expansion-panel-header>
    <span>Details</span>
  </mat-expansion-panel-header>

  <ul class="list-unstyled">
    <li><strong>Artist:</strong> {{ artistsText() }}</li>
    <li><strong>Year:</strong> {{ data()!.year ?? "-" }}</li>
    <li><strong>Artist country:</strong> {{ data()!.origin }}</li>
    <li><strong>Store:</strong> {{ data()!.country ?? "-" }}</li>
    @if (data()!.origin) { } @if (data()!.labels?.length) {
    <li><strong>Label:</strong> {{ labelsText() }}</li>
    }

    <li><strong>Genre:</strong> {{ genresText() }}</li>
    <li>
      <strong>Tracks:</strong>
      <ul>
        @for (track of (data()!.tracklist ?? []); track track.title) {
        <li>
          {{ track.position }} - {{ track.title }}
          <small>{{ track.duration ? track.duration : "" }}</small>
        </li>
        }
      </ul>
    </li>
  </ul>
</mat-expansion-panel>
}
